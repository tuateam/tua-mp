!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.TuaWx={})}(this,function(t){"use strict";var d={enumerable:!0,configurable:!0},v=function(t){return"function"==typeof t},h=function(e,r){Object.keys(e).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})},n=Array.prototype,b=Object.create(n),o=["pop","push","sort","shift","splice","unshift","reverse"],a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m=null,O=function(d,h){return function(t){var e,r,n,o,a,i,c,u,f=t.path,l=t.newVal,p=t.oldVal,s=t.isArrDirty,y=void 0!==s&&s;m=j({},m,(n=l,(r=f)in(e={})?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e)),y&&(i=(o={obj:d,val:l,path:f}).obj,c=o.path,u=o.val,(a=c,a.split(".").map(function(t){return t.split(/\[(.*?)\]/).filter(function(t){return t})}).reduce(function(t,e){return t.concat(e)},[])).reduce(function(t,e,r,n){if(r!==n.length-1)return t[e]||(t[e]=/\d/.test(e)?[]:{}),t[e];t[e]=u},i)),Promise.resolve().then(function(){if(m){d.setData(j({},d.$computed,m));var t=h[f];v(t)&&t.call(d,m[f],p),m=null}})}},g=function(y){return function u(f){var t,e,i,c,l,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if(Array.isArray(f)){var r=f.map(function(t,e){return u(t,p+"["+e+"]")});return e=(t={arr:r,path:p,observeDeep:u,asyncSetData:y}).arr,i=t.path,c=t.observeDeep,l=t.asyncSetData,o.forEach(function(o){var a=n[o];b[o]=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=a.apply(this,e);return l("pop"===o?{path:i,newVal:this}:{path:i,newVal:c(this,i),isArrDirty:!0}),n}}),h(b,e),e}if("object"===(void 0===f?"undefined":a(f))){var s=Object.create(null);return Object.keys(f).forEach(function(t){if(!/^__.*__$/.test(t)){var e,r,n,o,a,i,c=""===p?t:p+"."+t;e={obj:s,key:t,val:u(f[t],c),path:c,asyncSetData:y},r=e.obj,n=e.key,o=e.val,a=e.path,i=e.asyncSetData,Object.defineProperty(r,n,j({},d,{get:function(){return o},set:function(t){if(t!==o){var e=o;i({path:a,newVal:o=t,oldVal:e})}}}))}}),s}return f}};console.log("Tua-Mp Version: 0.5.1");t.TuaPage=function(t){var e=t.data,r=t.watch,p=void 0===r?{}:r,n=t.methods,o=void 0===n?{}:n,a=t.computed,s=void 0===a?{}:a,y=function(t,e){var r={};for(var n in t)0<=e.indexOf(n)||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}(t,["data","watch","methods","computed"]),i=v(e)?e():e;return Page(j({},y,o,{data:i,onLoad:function(){var t,e,o,a,i,c,r=O(this,p),n=g(r);e=n((t=this).data),t.$data=e,h(e,t),o=this,a=s,i=p,c=Object.create(null),Object.keys(a).forEach(function(r){var n=a[r].call(o);Object.defineProperty(c,r,j({},d,{get:function(){var t=a[r].call(o),e=i[r];return v(e)&&t!==n&&e.call(o,t,n),n=t},set:function(){}}))}),o.$computed=c,h(c,o),o.setData(c);for(var u=arguments.length,f=Array(u),l=0;l<u;l++)f[l]=arguments[l];y.onLoad&&y.onLoad.apply(this,f)}}))},Object.defineProperty(t,"__esModule",{value:!0})});
