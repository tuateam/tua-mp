!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.TuaWx={})}(this,function(t){"use strict";var v={enumerable:!0,configurable:!0},b=function(t){return"function"==typeof t},d=function(e,n){Object.keys(e).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j=null,m=function(d,v){return function(t){var e,n,r,o,a,c,i,u,f=t.path,l=t.newVal,p=t.oldVal,s=t.isInsert,y=void 0!==s&&s;j=h({},j,(r=l,(n=f)in(e={})?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e)),y&&(c=(o={obj:d,val:l,path:f}).obj,i=o.path,u=o.val,(a=i,a.split(".").map(function(t){return t.split(/\[(.*?)\]/).filter(function(t){return t})}).reduce(function(t,e){return t.concat(e)},[])).reduce(function(t,e,n,r){if(n!==r.length-1)return t[e]||(t[e]=/\d/.test(e)?[]:{}),t[e];t[e]=u},c)),Promise.resolve().then(function(){if(j){d.setData(h({},d.$computed,j));var t=v[f];b(t)&&t.call(d,j[f],p),j=null}})}},O=function(d){return function u(f){var t,c,i,l,p,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if(Array.isArray(f)){var e=f.map(function(t,e){return u(t,s+"["+e+"]")});return c=(t={arr:e,path:s,observeDeep:u,asyncSetData:d}).arr,i=t.path,l=t.observeDeep,p=t.asyncSetData,["pop","push","sort","shift","splice","unshift","reverse"].forEach(function(o){var a=c[o];c[o]=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=a.apply(c,e);return p("pop"===o?{path:i,newVal:c}:{path:i,newVal:l(c,i),isInsert:!0}),r}}),c}if("object"===(void 0===f?"undefined":n(f))){var y=Object.create(null);return Object.keys(f).forEach(function(t){if(!/^__.*__$/.test(t)){var e,n,r,o,a,c,i=""===s?t:s+"."+t;e={obj:y,key:t,val:u(f[t],i),path:i,asyncSetData:d},n=e.obj,r=e.key,o=e.val,a=e.path,c=e.asyncSetData,Object.defineProperty(n,r,h({},v,{get:function(){return o},set:function(t){if(t!==o){var e=o;c({path:a,newVal:o=t,oldVal:e})}}}))}}),y}return f}};console.log("Tua-Mp Version: 0.5.1");t.TuaPage=function(t){var e=t.data,n=t.watch,p=void 0===n?{}:n,r=t.methods,o=void 0===r?{}:r,a=t.computed,s=void 0===a?{}:a,y=function(t,e){var n={};for(var r in t)0<=e.indexOf(r)||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["data","watch","methods","computed"]),c=b(e)?e():e;return Page(h({},y,o,{data:c,onLoad:function(){var t,e,o,a,c,i,n=m(this,p),r=O(n);e=r((t=this).data),t.$data=e,d(e,t),o=this,a=s,c=p,i=Object.create(null),Object.keys(a).forEach(function(n){var r=a[n].call(o);Object.defineProperty(i,n,h({},v,{get:function(){var t=a[n].call(o),e=c[n];return b(e)&&t!==r&&e.call(o,t,r),r=t},set:function(){}}))}),o.$computed=i,d(i,o),o.setData(i);for(var u=arguments.length,f=Array(u),l=0;l<u;l++)f[l]=arguments[l];y.onLoad&&y.onLoad.apply(this,f)}}))},Object.defineProperty(t,"__esModule",{value:!0})});
